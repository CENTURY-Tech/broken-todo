<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Broken Todo List</title>

    <script src="https://cdn.rawgit.com/download/polymer-cdn/1.5.0/lib/webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="import" href="https://cdn.rawgit.com/download/polymer-cdn/1.5.0/lib/iron-collapse/iron-collapse.html">
    <link rel="import" href="./broken-todo.html">

    <style>
      .collapse-title {
        cursor: pointer;
      }

      iron-collapse {
        background: #eee;
        padding: 1em;
      }
    </style>
  </head>

  <body>
    <h2>Broken Todo</h2>

    <div>
      <h3>Known Bugs:</h3>

      <ul class="bugs collapses">
        <li class="bug">
          <strong class="collapse-title">Should not add empty items</strong>
          <iron-collapse id="collapse">
            <h4>Steps to Reproduce</h4>
            <ul>
              <li>Press save. A new todo item with an empty title was added.</li>
            </ul>
            <h4>Expected Behaviour</h4>
            <div>No item should be added. Cancel should be disabled until text is added</div>
          </iron-collapse>
        </li>

        <li class="bug">
          <strong class="collapse-title">Cancel should reset the input</strong>
          <iron-collapse id="collapse">
            <h4>Steps to Reproduce</h4>
            <ul>
              <li>Type something in the input element</li>
              <li>Press cancel</li>
              <li>Press save. A new todo item was added.</li>
            </ul>
            <h4>Expected Behaviour</h4>
            <div>No item should be added.</div>
          </iron-collapse>
        </li>

        <li class="bug">
          <strong class="collapse-title">Editing the first item duplicates it</strong>
          <iron-collapse id="collapse">
            <h4>Steps to Reproduce</h4>
            <ul>
              <li>Add several todo items</li>
              <li>Click on the first item on the list</li>
              <li>Change the text in the input element</li>
              <li>Press save. A new todo item was added</li>
            </ul>
            <h4>Expected Behaviour</h4>
            <div>It should change the title of the first item in the todo list.</div>
          </iron-collapse>
        </li>

        <li class="bug">
          <strong class="collapse-title">Disabled items may still be editable</strong>
          <iron-collapse id="collapse">
            <div>
              <h4>Steps to Reproduce</h4>
              <ul>
                <li>Add several todo items</li>
                <li>Click on the second task in the list</li>
                <li>Disable the task by pressing the completed checkbox</li>
                <li>change the value in the top input</li>
                <li>press save</li>
              </ul>
              <h4>Expected Behaviour</h4>
              <div>The input should have been cleared when the todo was disabled</div>
            </div>
          </iron-collapse>
        </li>

        <li class="bug">
          <strong class="collapse-title">Clear completed tasks clear only some elements</strong>
          <iron-collapse id="collapse">
            <div>
              <h4>Steps to Reproduce</h4>
              <ul>
                <li>Add several todo items</li>
                <li>Click on the checkboxes to complete them all</li>
                <li>Press the clear completed tasks button</li>
                <li>Some completed items will remain in the todo list</li>
              </ul>
              <h4>Expected Behaviour</h4>
              <div>All completed and only completed tasks should be deleted</div>
            </div>
          </iron-collapse>
        </li>
      </ul>

      <h3>Feature Requests:</h3>

      <ul class="features collapses">
        <li class="feature">
          <strong class="collapse-title">The list should accept no more than 10 items</strong>
          <iron-collapse id="collapse">
            <h4>Acceptance criteria</h4>
            <div>Upon adding the eleventh item the end user should be alerted to the fact that this list only supports 10 items.</div>
          </iron-collapse>
        </li>
      </ul>
    </div>

    <broken-todo max-items="10"></broken-todo>

    <script>
      [].forEach.call(document.querySelectorAll(".collapses"), function(elem) {
        elem.addEventListener("click", (evt) => {
          if (evt.target.classList.contains("collapse-title")) {
            evt.target.nextElementSibling.toggle();
          }
        });
      });
    </script>
  </body>

</html>
